Этот Python скрипт — это приложение на Streamlit, которое позволяет пользователям визуализировать различные показатели продовольственной безопасности в нескольких странах Центральной Азии. Вот пошаговое руководство для файла.

Предварительные требования
Установите необходимые библиотеки. Убедитесь, что у вас установлены следующие библиотеки:

streamlit
pandas
matplotlib
seaborn
pydeck
Вы можете установить их с помощью команды:

bash
Копировать код
pip install streamlit pandas matplotlib seaborn pydeck
Файл данных. Программа ожидает файл aggregated_results.xlsx в той же директории, где находится сам скрипт. Убедитесь, что у вас есть этот файл с необходимыми данными.

Структура приложения
Импорт библиотек: В начале скрипта импортируются необходимые библиотеки:

streamlit для создания веб-интерфейса.
pandas для работы с данными в формате таблиц.
matplotlib и seaborn для создания графиков.
pydeck для отображения географической карты.
Загрузка данных: Программа загружает Excel-файл с данными через pandas:

python
Копировать код
df_pandas = pd.read_excel("aggregated_results.xlsx")
Обработка данных:

Разделение столбца year на два столбца — country и year.
Преобразование года в числовой формат.
Замена английских названий стран на их русские аналоги с помощью словаря:
python
Копировать код
country_mapping = {
    'Kazakhstan': 'Казахстан',
    'KGZ': 'Кыргызстан',
    'TAIJ': 'Таджикистан',
    'UZB': 'Узбекистан'
}
df_pandas['country'] = df_pandas['country'].replace(country_mapping)
df_pandas = df_pandas.rename(columns={'country': 'Страна'})
Фильтрация по странам и годам:

В интерфейсе пользователи могут выбрать страны и диапазон лет для анализа с помощью виджетов multiselect и slider.
Пример выбора:
python
Копировать код
selected_countries = st.multiselect("Выберите страны для отображения:", countries, default=countries)
year_range = st.slider("Выберите диапазон лет:", min_value=2014, max_value=2017, value=(2014, 2017))
Выбор метрики для визуализации:

Пользователи могут выбрать показатель для визуализации из выпадающего списка:
python
Копировать код
selected_metric = st.selectbox("Выберите показатель для визуализации:", metrics, format_func=lambda x: metrics_mapping[x])
Анализ данных:

После выбора данных отображается статистика (среднее, минимум, максимум) для выбранных стран и показателя.
Визуализируется график динамики показателя по годам с использованием matplotlib.
Создание диаграмм:

Линейный график для отображения изменений метрики по годам.
Столбчатая диаграмма для сравнения стран.
Карта с расположением стран:

Создается интерактивная карта с помощью библиотеки pydeck, которая отображает местоположение стран.
Запуск приложения
Для запуска приложения выполните следующую команду в терминале:

bash
Копировать код
streamlit run diareia.py
После этого откроется локальная веб-страница, где вы сможете взаимодействовать с приложением, выбирать страны, диапазоны лет и метрики для визуализации.

Возможные ошибки
Ошибка загрузки данных: Если данные не загружены или отсутствуют выбранные страны, программа выдаст сообщение об ошибке:

python
Копировать код
st.error("Не удалось получить данные для выбранных стран.")
Отсутствие файла: Убедитесь, что файл aggregated_results.xlsx находится в той же папке, где находится скрипт.

Заключение
Данное приложение предоставляет интерактивный интерфейс для анализа данных по продовольственной безопасности стран Центральной Азии. Вы можете выбрать страны, метрики и года, а затем получить графики и карты для наглядного отображения информации.
